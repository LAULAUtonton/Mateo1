<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>AerolÃ­nea Tycoon</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    font-family: Arial, sans-serif;
    background: linear-gradient(#87CEEB, #f0f8ff);
    margin: 0;
    text-align: center;
}
h1{
    color: #003366;
}
.panel{
    background: #fff;
    margin: 10px auto;
    padding: 10px;
    max-width: 420px;
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,.2);
}
canvas{
    border: 2px solid #003366;
    border-radius: 10px;
    background: #cceeff;
    max-width: 95%;
}
button{
    padding: 8px;
    margin: 5px;
    border: none;
    border-radius: 5px;
    background: #007BFF;
    color: #fff;
    cursor: pointer;
}
button:hover{
    background: #0056b3;
}
.small{
    font-size: .9em;
    color: #444;
}
</style>
</head>

<body>

<h1>âœˆï¸ AerolÃ­nea Tycoon</h1>

<div class="panel">
    <p>ğŸ’° Dinero: $<span id="dinero"></span></p>
    <p>âœˆï¸ Aviones: <span id="aviones"></span></p>
    <p>ğŸ‘¨â€âœˆï¸ Pilotos: <span id="pilotos"></span></p>
    <p>ğŸ˜Š SatisfacciÃ³n: <span id="satisfaccion"></span>%</p>
</div>

<canvas id="mapa" width="360" height="220"></canvas>

<div class="panel">
    <p>ğŸ›« Ruta: <span id="rutaTxt">Selecciona dos ciudades</span></p>
    <button onclick="volar()">Volar</button>
    <button onclick="comprarAvion()">Comprar aviÃ³n ($500)</button>
    <button onclick="contratarPiloto()">Contratar piloto ($300)</button><br>
    <button onclick="guardar()">ğŸ’¾ Guardar</button>
    <button onclick="cargar()">ğŸ“‚ Cargar</button>
</div>

<p id="log" class="small"></p>

<script>
/* ===========================
   VARIABLES DEL JUEGO
=========================== */
let dinero = 2000;
let aviones = 1;
let pilotos = 1;
let satisfaccion = 80;

const canvas = document.getElementById("mapa");
const ctx = canvas.getContext("2d");

const ciudades = [
    { n: "MÃ©xico", x: 80, y: 110 },
    { n: "Nueva York", x: 120, y: 70 },
    { n: "Madrid", x: 200, y: 80 },
    { n: "SÃ£o Paulo", x: 150, y: 160 },
    { n: "Tokio", x: 300, y: 90 }
];

let origen = null;
let destino = null;

/* ===========================
   REFERENCIAS DOM
=========================== */
const dineroSpan = document.getElementById("dinero");
const avionesSpan = document.getElementById("aviones");
const pilotosSpan = document.getElementById("pilotos");
const satisfaccionSpan = document.getElementById("satisfaccion");
const rutaTxt = document.getElementById("rutaTxt");
const logP = document.getElementById("log");

/* ===========================
   DIBUJAR MAPA
=========================== */
function dibujar(){
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.font = "12px Arial";

    ciudades.forEach(c => {
        ctx.beginPath();
        ctx.arc(c.x, c.y, 6, 0, Math.PI * 2);
        ctx.fillStyle = (c === origen) ? "green" : (c === destino) ? "red" : "#003366";
        ctx.fill();
        ctx.fillStyle = "#003366";
        ctx.fillText(c.n, c.x + 8, c.y + 4);
    });

    if (origen && destino) {
        ctx.beginPath();
        ctx.moveTo(origen.x, origen.y);
        ctx.lineTo(destino.x, destino.y);
        ctx.strokeStyle = "orange";
        ctx.lineWidth = 2;
        ctx.stroke();
    }
}

/* ===========================
   SELECCIÃ“N DE CIUDADES
=========================== */
canvas.addEventListener("click", e => {
    const r = canvas.getBoundingClientRect();
    const x = e.clientX - r.left;
    const y = e.clientY - r.top;

    ciudades.forEach(c => {
        if (Math.hypot(c.x - x, c.y - y) < 8) {
            if (!origen) origen = c;
            else if (!destino && c !== origen) destino = c;
            else { origen = c; destino = null; }
        }
    });

    rutaTxt.textContent = origen && destino ? `${origen.n} â†’ ${destino.n}` : "Selecciona dos ciudades";
    dibujar();
});

/* ===========================
   ACCIONES DEL JUEGO
=========================== */
function volar(){
    if (!origen || !destino) return log("âŒ Selecciona dos ciudades");

    if (aviones < 1 || pilotos < 1)
        return log("âŒ Necesitas al menos 1 aviÃ³n y 1 piloto");

    let distancia = Math.hypot(origen.x - destino.x, origen.y - destino.y);
    let ganancia = Math.floor(distancia * 5 * (satisfaccion / 100));

    dinero += ganancia;
    satisfaccion = Math.max(0, satisfaccion - 2);

    log(`ğŸ›« ${origen.n} â†’ ${destino.n} +$${ganancia}`);
    actualizar();
}

function comprarAvion(){
    if (dinero >= 500) {
        dinero -= 500;
        aviones++;
        log("âœˆï¸ AviÃ³n comprado");
    } else log("âŒ No tienes suficiente dinero");
    actualizar();
}

function contratarPiloto(){
    if (dinero >= 300) {
        dinero -= 300;
        pilotos++;
        log("ğŸ‘¨â€âœˆï¸ Piloto contratado");
    } else log("âŒ No tienes suficiente dinero");
    actualizar();
}

function guardar(){
    localStorage.setItem("aero", JSON.stringify({ dinero, aviones, pilotos, satisfaccion }));
    log("ğŸ’¾ Partida guardada");
}

function cargar(){
    let d = JSON.parse(localStorage.getItem("aero"));
    if (d) {
        dinero = d.dinero;
        aviones = d.aviones;
        pilotos = d.pilotos;
        satisfaccion = d.satisfaccion;
        log("ğŸ“‚ Partida cargada");
    } else log("âŒ No hay partida guardada");
    actualizar();
}

/* ===========================
   ACTUALIZAR UI
=========================== */
function actualizar(){
    dineroSpan.textContent = dinero;
    avionesSpan.textContent = aviones;
    pilotosSpan.textContent = pilotos;
    satisfaccionSpan.textContent = Math.floor(satisfaccion);
}

function log(t){
    logP.textContent = t;
}

/* ===========================
   INICIO
=========================== */
dibujar();
actualizar();
</script>

</body>
</html>
